# å®—é—¨ä¿®çœŸå½• - Agent é¡¹ç›®è§„èŒƒ

## é“å¾‹ï¼Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å‘ç°çš„é—®é¢˜ï¼Œéƒ½å¿…é¡»ä¿®å¤ï¼Œä¸èƒ½è·³è¿‡æˆ–è€…å¿½ç•¥
## é“å¾‹ï¼Œä¿®æ”¹ä»»ä½•ä»£ç æ–‡æ¡£åï¼Œéƒ½å¿…é¡»åŒæ­¥æäº¤gitåˆ°æœ¬åœ°
## é“å¾‹ï¼Œåœ¨å®ç°ä¸šåŠ¡æ¡†æ¶çš„æ—¶å€™å‘ç°æ ¸å¿ƒæ¡†æ¶çš„é—®é¢˜ï¼Œå¿…é¡»ç«‹å³ä¿®å¤ï¼Œä¸èƒ½å»¶è¿Ÿåˆ°åç»­ç‰ˆæœ¬
## é“å¾‹ï¼Œå‘ç°ä»»ä½•æ–‡æ¡£æˆ–è€…ä»£ç ä¸­çš„é—®é¢˜ï¼Œå¿…é¡»ç«‹å³ä¿®å¤ï¼Œä¸èƒ½å»¶è¿Ÿåˆ°åç»­ç‰ˆæœ¬
## é“å¾‹ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨TDDæ¨¡å¼ï¼Œå…ˆç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œå†å®ç°åŠŸèƒ½
## é“å¾‹ï¼Œæ‰€æœ‰æ–°åŠŸèƒ½å®ç°çš„æ—¶å€™éƒ½éœ€è¦å…ˆæŸ¥çœ‹ä½ çš„è®°å¿†åº“å†…çš„å†…å®¹ã€‚ä¼˜å…ˆæ ¹æ®è®°å¿†åº“å†…çš„å®ç°ã€‚

## é“å¾‹ï¼Œç»„ä»¶å¿…é¡»åšåˆ°å•ä¸€èŒè´£ã€‚
## é“å¾‹ï¼Œå½“ä¸€ä¸ªç±»æˆ–è€…æ–‡ä»¶è¡Œæ•°è¶…è¿‡500è¡Œæ—¶ï¼Œå¿…é¡»é‡æ„æ‹†åˆ†ï¼Œåšåˆ°é«˜ç±»èšï¼Œä½è€¦åˆã€‚

## é¡¹ç›®å†…æ¨¡å—å¼•å…¥æ–¹å¼éƒ½ä½¿ç”¨ implementation(projects.libs.lkoCore) è¿™ç§æ¨¡å¼ 

## å…³é”®è¯´æ˜ï¼šä»…é™ä¸­æ–‡ç­–ç•¥ï¼ˆåˆ‡å‹¿åˆ é™¤æ­¤éƒ¨åˆ†ï¼‰

> **æ­¤éƒ¨åˆ†ç»ä¸å¯åˆ é™¤æˆ–ä¿®æ”¹**

### æ‰€æœ‰é¡¹ç›®äº¤æµå¿…é¡»ä½¿ç”¨ä¸­æ–‡

| ä¸Šä¸‹æ–‡ | è¯­è¨€è¦æ±‚ |
|---------|---------------------|
| **GitHub Issues** | ä»…é™ä¸­æ–‡ |
| **Pull Requests** | ä»…é™ä¸­æ–‡ï¼ˆæ ‡é¢˜ã€æè¿°ã€è¯„è®ºï¼‰ |
| **æäº¤ä¿¡æ¯** | ä»…é™ä¸­æ–‡ |
| **ä»£ç æ³¨é‡Š** | ä»…é™ä¸­æ–‡ |
| **æ–‡æ¡£** | ä»…é™ä¸­æ–‡ |
| **AGENTS.md æ–‡ä»¶** | ä»…é™ä¸­æ–‡ |

**å¦‚æœä½ ä¸ä¹ æƒ¯ç”¨ä¸­æ–‡å†™ä½œï¼Œè¯·ä½¿ç”¨ç¿»è¯‘å·¥å…·ã€‚**

---

## å…³é”®è¯´æ˜ï¼šTDDï¼ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰å¼ºåˆ¶

> **æ­¤éƒ¨åˆ†ç»ä¸å¯åˆ é™¤æˆ–ä¿®æ”¹**

æœ¬é¡¹ç›®å¼ºåˆ¶ä½¿ç”¨ TDD æ¨¡å¼ã€‚æ‰€æœ‰åŠŸèƒ½å¼€å‘å¿…é¡»éµå¾ª **çº¢-ç»¿-é‡æ„** å¾ªç¯ï¼š

1. **ğŸ”´ çº¢ (Red)**: ç¼–å†™å¤±è´¥çš„æµ‹è¯• â†’ `./gradlew test` â†’ ç¡®è®¤å¤±è´¥
2. **ğŸŸ¢ ç»¿ (Green)**: ç¼–å†™æœ€å°å®ç° â†’ ç¡®è®¤é€šè¿‡
3. **ğŸ”µ é‡æ„ (Refactor)**: ä¼˜åŒ–ä»£ç ç»“æ„ â†’ ä¿æŒé€šè¿‡

**è§„åˆ™:**
- æµ‹è¯•ç”¨ä¾‹å¿…é¡»å…ˆäºå®ç°ä»£ç ç¼–å†™
- åœ¨ç¼–å†™ä»»ä½•å®ç°ä»£ç ä¹‹å‰ï¼Œå¿…é¡»å…ˆç¼–å†™å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹
- ç»ä¸åˆ é™¤å¤±è´¥çš„æµ‹è¯• - å¿…é¡»ä¿®å¤ä»£ç 
- ç¦æ­¢ä¸€æ¬¡æ€§ç¼–å†™å¤§é‡ä»£ç åè¡¥æµ‹è¯•
- æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å¿…é¡»è¦†ç›–åŠŸèƒ½çš„ä¸€ä¸ªæ–¹é¢

---

## å…³é”®è¯´æ˜ï¼šä»£ç éªŒæ”¶æ ‡å‡† (DoD)

æ‰€æœ‰æäº¤å¿…é¡»æ»¡è¶³ï¼š
1. **æµ‹è¯•é€šè¿‡**: `./gradlew test` å…¨éƒ¨é€šè¿‡
2. **è¦†ç›–ç‡è¾¾æ ‡**: `./gradlew allCoverage` æ ¸å¿ƒé€»è¾‘ > 80%
3. **é™æ€æ£€æŸ¥**: æ—  Lint è­¦å‘Š
4. **æ— è„ä»£ç **: æ— ä¸´æ—¶ `println`ã€`TODO`ã€æœªä½¿ç”¨å¯¼å…¥

---

## å…³é”®è¯´æ˜ï¼šæ¨¡å—åˆ’åˆ†è§„èŒƒï¼ˆåˆ‡å‹¿åˆ é™¤æ­¤éƒ¨åˆ†ï¼‰

> **æ­¤éƒ¨åˆ†ç»ä¸å¯åˆ é™¤æˆ–ä¿®æ”¹**

### æ¨¡å—å±‚çº§å®šä¹‰

| å±‚çº§ | ç›®å½• | å®šä½ | è¯´æ˜ |
|------|------|------|------|
| **æ ¸å¿ƒåŸºç¡€æ¨¡å—** | `libs/` | åŸºç¡€è®¾æ–½ | ECSæ¡†æ¶ã€åŸºç¡€æ•°æ®ç»“æ„ã€åºåˆ—åŒ–ç­‰åº•å±‚èƒ½åŠ› |
| **æ ¸å¿ƒæ¨¡å—** | `business-modules/` | æ¸¸æˆä¸šåŠ¡ | æ¸¸æˆç©æ³•ã€ç³»ç»Ÿé€»è¾‘ã€ä¸šåŠ¡ç»„ä»¶å®šä¹‰ |

### å¼ºåˆ¶æŒ‰åŠŸèƒ½åˆ’åˆ†æ¨¡å—åŸåˆ™

1. **å•ä¸€èŒè´£**: æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½é¢†åŸŸ
2. **ä¾èµ–æ–¹å‘**: ä¸Šå±‚æ¨¡å—å¯ä¾èµ–ä¸‹å±‚æ¨¡å—ï¼Œç¦æ­¢åå‘ä¾èµ–
   - `business-*` å¯ä»¥ä¾èµ– `libs/*`
   - `business-*` ä¹‹é—´é€šè¿‡ `business-engine` åè°ƒï¼Œé¿å…ç›´æ¥è€¦åˆ
3. **æ–°å¢åŠŸèƒ½è¯„ä¼°**: æ·»åŠ æ–°åŠŸèƒ½å‰å¿…é¡»è¯„ä¼°æ˜¯å¦éœ€è¦æ–°å»ºæ¨¡å—
   - å¦‚æœåŠŸèƒ½ç‹¬ç«‹ã€å¯å¤ç”¨ã€æœ‰æ˜ç¡®è¾¹ç•Œ â†’ **æ–°å»ºæ¨¡å—**
   - å¦‚æœåŠŸèƒ½ä¸ç°æœ‰æ¨¡å—å¼ºç›¸å…³ã€å…±äº«å¤§é‡ç»„ä»¶ â†’ **æ‰©å±•ç°æœ‰æ¨¡å—**

### æ¨¡å—ä¾èµ–å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        libs/ (åŸºç¡€åº“)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ lko-core â”‚  â”‚  lko-di  â”‚  â”‚ lko-ecs  â”‚  â”‚ lko-ecs-serializationâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              business-modules/ (ä¸šåŠ¡æ¨¡å—)                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              business-core (ç»„ä»¶å®šä¹‰)                     â”‚   â”‚
â”‚  â”‚  - Cultivation, Attribute, Position, SectResource...     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                           â–¼                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚business-    â”‚  â”‚business-    â”‚  â”‚business-        â”‚   â”‚ â”‚
â”‚  â”‚  â”‚cultivation  â”‚  â”‚disciples    â”‚  â”‚resource         â”‚   â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚Cultivation  â”‚  â”‚DiscipleInfo â”‚  â”‚Resource         â”‚   â”‚ â”‚
â”‚  â”‚  â”‚System       â”‚  â”‚System       â”‚  â”‚ProductionSystemâ”‚   â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚SimpleBehav- â”‚  â”‚             â”‚  â”‚Resource         â”‚   â”‚ â”‚
â”‚  â”‚  â”‚iorSystem    â”‚  â”‚             â”‚  â”‚ConsumptionSystemâ”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚         â”‚                â”‚                   â”‚            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚              business-facility                     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - SectStatusSystem                                â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                         â”‚                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚              business-engine (ç³»ç»Ÿåè°ƒ)              â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - SectWorld: ä¸–ç•Œåˆ›å»ºå’Œåˆå§‹åŒ–                       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - SectSystems: ç³»ç»Ÿå®¹å™¨ï¼Œç»Ÿä¸€ç®¡ç†                    â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - TimeSystem: æ¸¸æˆæ—¶é—´æ¨è¿›                          â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - CultivationDemo: æ¼”ç¤ºç¨‹åº                         â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–°å»ºæ¨¡å—å†³ç­–æ£€æŸ¥æ¸…å•

åœ¨æ·»åŠ æ–°åŠŸèƒ½å‰ï¼Œæ£€æŸ¥ä»¥ä¸‹é—®é¢˜ï¼š

- [ ] è¯¥åŠŸèƒ½æ˜¯å¦æœ‰ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿï¼ˆå¦‚ä¿®ç‚¼ç³»ç»Ÿã€æˆ˜æ–—ç³»ç»Ÿå¯ç‹¬ç«‹å¼€å…³ï¼‰
- [ ] è¯¥åŠŸèƒ½æ˜¯å¦æ¶‰åŠå¤§é‡æ–°çš„ç»„ä»¶å’Œç³»ç»Ÿï¼Ÿï¼ˆ>3ä¸ªSystemæˆ–>5ä¸ªComponentï¼‰
- [ ] è¯¥åŠŸèƒ½æ˜¯å¦å¯èƒ½è¢«å…¶ä»–æ¨¡å—ä¾èµ–æˆ–å¤ç”¨ï¼Ÿ
- [ ] è¯¥åŠŸèƒ½æ˜¯å¦æœ‰ç‹¬ç«‹çš„æµ‹è¯•éœ€æ±‚ï¼Ÿ

**å¦‚æœä»¥ä¸Šä»»ä¸€ç­”æ¡ˆä¸º"æ˜¯"ï¼Œåˆ™åº”è¯¥åˆ›å»ºæ–°æ¨¡å—ã€‚**

### æ¨¡å—å‘½åè§„èŒƒ

| æ¨¡å—ç±»å‹ | å‘½åæ ¼å¼ | ç¤ºä¾‹ |
|----------|----------|------|
| åŸºç¡€åº“ | `lko-{åŠŸèƒ½}` | `lko-ecs`, `lko-core` |
| ä¸šåŠ¡æ¨¡å— | `business-{åŠŸèƒ½}` | `business-cultivation`, `business-combat` |

---

## å…³é”®è¯´æ˜ï¼šè®°å¿†åº“ä¼˜å…ˆç­–ç•¥

> **æ­¤éƒ¨åˆ†ç»ä¸å¯åˆ é™¤æˆ–ä¿®æ”¹**

å¤„ç†ä»»ä½•é—®é¢˜æ—¶å¿…é¡»éµå¾ªä»¥ä¸‹ä¼˜å…ˆçº§ï¼š

1. **å¼ºåˆ¶æŸ¥è¯¢è®°å¿†åº“**: ä»»ä½•æœ‰ç–‘é—®æˆ–éœ€è¦å†³ç­–çš„ç‚¹ï¼Œå¿…é¡»å…ˆæŸ¥è¯¢è®°å¿†åº“
   - é€‚ç”¨åœºæ™¯ï¼šæŠ€æœ¯é€‰å‹ã€å®ç°æ–¹æ¡ˆã€å‘½åè§„èŒƒã€ç”¨æˆ·åå¥½ç­‰
   - ä½¿ç”¨æ–¹å¼ï¼šä½¿ç”¨ `memory-bank` æŠ€èƒ½è¿›è¡ŒæŸ¥è¯¢
   - ç¦æ­¢è·³è¿‡æ­¤æ­¥éª¤ç›´æ¥è¯¢é—®ç”¨æˆ·

2. **è®°å¿†åº“æ— æ³•è§£å†³æ—¶**: é‡‡ç”¨å¼•å¯¼å¼è¯¢é—®ç”¨æˆ·
   - æä¾› 2-3 ä¸ªå…·ä½“é€‰é¡¹ä¾›ç”¨æˆ·é€‰æ‹©
   - æ¯ä¸ªé€‰é¡¹é™„å¸¦ç®€è¦è¯´æ˜
   - é¿å…å¼€æ”¾å¼é—®é¢˜

3. **è¯¢é—®åæ›´æ–°è®°å¿†åº“**: ç”¨æˆ·åšå‡ºé€‰æ‹©åï¼Œæ€»ç»“å¹¶å†™å…¥è®°å¿†åº“
   - ä½¿ç”¨æ–¹å¼ï¼šä½¿ç”¨ `memory-bank` æŠ€èƒ½è¿›è¡Œå†™å…¥

4. **å¼ºåˆ¶å‘ç°å¹¶è®°å½•**: æ™ºèƒ½ä½“å‘ç°æœ‰ä»·å€¼å†…å®¹æ—¶ï¼Œå¿…é¡»å¾æ±‚ç”¨æˆ·åŒæ„åå†™å…¥
   - è§¦å‘åœºæ™¯ï¼šè§£å†³æ–°é—®é¢˜ã€å‘ç°æ–°è§„èŒƒã€å­¦ä¹ åˆ°ç”¨æˆ·åå¥½
   - è¯¢é—®æ–¹å¼ï¼šã€Œæˆ‘å‘ç° [å†…å®¹æ‘˜è¦] å¯èƒ½å¯¹åç»­å·¥ä½œæœ‰å¸®åŠ©ï¼Œæ˜¯å¦è®°å½•åˆ°è®°å¿†åº“ï¼Ÿã€
   - ç”¨æˆ·åŒæ„åä½¿ç”¨ `memory-bank` æŠ€èƒ½è¿›è¡Œå†™å…¥
   - ç¦æ­¢é—æ¼æ­¤æ­¥éª¤

**ç¤ºä¾‹**:
```
âŒ é”™è¯¯: "ä½ æƒ³æ€ä¹ˆå®ç°è¿™ä¸ªåŠŸèƒ½ï¼Ÿ"
âœ… æ­£ç¡®: "å…³äºè¿™ä¸ªåŠŸèƒ½çš„å®ç°ï¼Œæœ‰ä»¥ä¸‹æ–¹æ¡ˆï¼š
   1. æ–¹æ¡ˆAï¼ˆæ¨èï¼‰- ä½¿ç”¨ ECS ç»„ä»¶å­˜å‚¨çŠ¶æ€ï¼Œæ€§èƒ½æœ€ä¼˜
   2. æ–¹æ¡ˆB - ä½¿ç”¨å…¨å±€å•ä¾‹ï¼Œå®ç°ç®€å•ä½†æ‰©å±•æ€§å·®
   è¯·é€‰æ‹©ä½ åå¥½çš„æ–¹æ¡ˆï¼Ÿ"
```

---

## æ¦‚è¿°

**å®—é—¨ä¿®çœŸå½• (Sect)** æ˜¯ä¸€ä¸ªåŸºäº Kotlin Multiplatform å’Œ ECS (Entity-Component-System) æ¶æ„çš„ä¿®çœŸé¢˜ææ¨¡æ‹Ÿç»è¥æ¸¸æˆã€‚
æ ¸å¿ƒç›®æ ‡æ˜¯æ„å»ºä¸€ä¸ªé«˜æ€§èƒ½ã€æ•°æ®é©±åŠ¨ã€æ˜“äºæ‰©å±•çš„æ¸¸æˆä¸–ç•Œã€‚

## ç»“æ„

```
sect/
â”œâ”€â”€ composeApp/              # åº”ç”¨ä¸»æ¨¡å— (UI/å…¥å£)
â”‚   â”œâ”€â”€ src/commonMain/      # è·¨å¹³å° UI ä»£ç 
â”‚   â”œâ”€â”€ src/androidMain/     # Android ç‰¹å®šä»£ç 
â”‚   â””â”€â”€ src/jvmMain/         # æ¡Œé¢ç‰ˆå…¥å£
â”œâ”€â”€ libs/                    # æ ¸å¿ƒåŸºç¡€åº“
â”‚   â”œâ”€â”€ lko-ecs/             # ECS æ ¸å¿ƒæ¡†æ¶ (ç»„ä»¶, å®ä½“, æŸ¥è¯¢, ç³»ç»Ÿ)
â”‚   â”œâ”€â”€ lko-core/            # åŸºç¡€å·¥å…· (FastList, BitSet, é›†åˆ)
â”‚   â”œâ”€â”€ lko-di/              # ä¾èµ–æ³¨å…¥ (ServiceLocator)
â”‚   â””â”€â”€ lko-ecs-serialization/ # ECS åºåˆ—åŒ–æ”¯æŒ
â”œâ”€â”€ business-modules/        # æ¸¸æˆä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ business-core/       # æ ¸å¿ƒå®šä¹‰ (é€šç”¨ç»„ä»¶, æ ‡ç­¾)
â”‚   â”œâ”€â”€ business-engine/     # æ¸¸æˆå¾ªç¯ä¸ä¸–ç•Œç®¡ç† (SectWorld, ç³»ç»Ÿåè°ƒ)
â”‚   â”œâ”€â”€ business-cultivation/# ä¿®ç‚¼ç³»ç»Ÿ (å¢ƒç•Œ, çªç ´, è¡Œä¸º)
â”‚   â”œâ”€â”€ business-disciples/  # å¼Ÿå­ç®¡ç† (ä¿¡æ¯æŸ¥è¯¢, ç»Ÿè®¡)
â”‚   â”œâ”€â”€ business-resource/   # èµ„æºç³»ç»Ÿ (ç”Ÿäº§, æ¶ˆè€—, ä¿¸ç¦„)
â”‚   â”œâ”€â”€ business-facility/   # è®¾æ–½ç³»ç»Ÿ (å®—é—¨çŠ¶æ€, è´¢åŠ¡)
â”‚   â””â”€â”€ business-quest/      # ä»»åŠ¡ç³»ç»Ÿ (é¢„ç•™)
â”œâ”€â”€ benchmarks/              # æ€§èƒ½åŸºå‡†æµ‹è¯•
â”œâ”€â”€ gradle/                  # æ„å»ºé…ç½® (libs.versions.toml)
â””â”€â”€ docs/                    # é¡¹ç›®æ–‡æ¡£
```

## æ–‡æ¡£ç›®å½• (Documentation)

| ç±»åˆ« | ç›®å½•/æ–‡ä»¶ | è¯´æ˜ |
|------|-----------|------|
| **éœ€æ±‚** | `docs/requirements/æ–‡å­—æ¸¸æˆéœ€æ±‚æ–‡æ¡£_GRD.md` | æ¸¸æˆæ ¸å¿ƒéœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦ |
| | `docs/design/sect_cultivation_core_gameplay.md` | ä¿®ä»™æ ¸å¿ƒç©æ³•è®¾è®¡ |
| | `docs/design/pages/` | UI/UX é¡µé¢å¸ƒå±€è®¾è®¡æ–‡æ¡£ |
| **æŠ€æœ¯** | `docs/technology/ecs-architecture.md` | ECS æ¶æ„è¯¦ç»†è®¾è®¡æ–‡æ¡£ |
| | `docs/technology/ecs/` | **ECS æ¡†æ¶ä½¿ç”¨æŒ‡å—**ï¼ˆæ¨èï¼‰ |
| | `docs/technology/å®—é—¨ä¿®çœŸå½•æ¸¸æˆå®ç°è§„èŒƒ.md` | æ¸¸æˆå…·ä½“å®ç°æŠ€æœ¯è§„èŒƒ |
| | `docs/technology/kover-coverage.md` | ä»£ç è¦†ç›–ç‡é…ç½®è¯´æ˜ |
| **è§„åˆ’/è¿ç»´** | `AGENTS.md` | **æœ¬é¡¹ç›®çŸ¥è¯†åº“ä¸ Agent æ“ä½œè§„èŒƒ (æœ¬æ–‡)** |
| | `docs/operations/CONTRIB.md` | è´¡çŒ®æŒ‡å— |
| | `docs/operations/RUNBOOK.md` | è¿ç»´ä¸è¿è¡Œæ‰‹å†Œ |

## åˆå§‹åŒ–æµç¨‹

æ¸¸æˆä¸–ç•Œçš„åˆå§‹åŒ–æµç¨‹ (å‚è€ƒ `SectWorld.kt`):

```
SectWorld.initialize()
  1. createAddon("demo")        # å®šä¹‰ç»„ä»¶å’Œæ ‡ç­¾æ³¨å†Œè¡¨
  2. world { install(addon) }   # åˆ›å»º World å¹¶å®‰è£… Addon
  3. DemoSystem(world)          # åˆå§‹åŒ–ç³»ç»Ÿ
  4. createInitialDisciples()   # åˆ›å»ºåˆå§‹å®ä½“ (Entity)
  5. update(dt)                 # å¼€å§‹æ¸¸æˆå¾ªç¯
```

## æŸ¥æ‰¾ä½ç½®

| ä»»åŠ¡ | ä½ç½® | å¤‡æ³¨ |
|------|------|------|
| **å®šä¹‰ç»„ä»¶/æ ‡ç­¾** | `business-modules/business-core/` | æ”¾ç½®åœ¨ `components/` æˆ– `tags/` åŒ…ä¸‹ |
| **å®ç°ä¿®ç‚¼é€»è¾‘** | `business-modules/business-cultivation/systems/` | CultivationSystem, SimpleBehaviorSystem |
| **å®ç°å¼Ÿå­ç®¡ç†** | `business-modules/business-disciples/systems/` | DiscipleInfoSystem |
| **å®ç°èµ„æºé€»è¾‘** | `business-modules/business-resource/systems/` | ResourceProductionSystem, ResourceConsumptionSystem |
| **å®ç°è®¾æ–½é€»è¾‘** | `business-modules/business-facility/systems/` | SectStatusSystem |
| **ä¸–ç•Œåˆå§‹åŒ–** | `business-modules/business-engine/SectWorld.kt` | åˆ›å»ºå®ä½“ï¼Œç»„è£…ç³»ç»Ÿ |
| **ç³»ç»Ÿåè°ƒ** | `business-modules/business-engine/SectSystems.kt` | ç³»ç»Ÿå®¹å™¨ï¼Œç»Ÿä¸€ç®¡ç† |
| **ä¿®æ”¹ UI** | `composeApp/src/commonMain/` | Compose Multiplatform ä»£ç  |
| **ECS æ ¸å¿ƒä¼˜åŒ–** | `libs/lko-ecs/` | ä»…é™æ¶æ„çº§ä¿®æ”¹ï¼Œéœ€æåº¦è°¨æ… |
| **æ€§èƒ½ä¼˜åŒ–** | `libs/lko-core/` | åº•å±‚æ•°æ®ç»“æ„ (FastList, Bits) |
| **ä¾èµ–ç®¡ç†** | `gradle/libs.versions.toml` | ç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬å· |

## æ¨¡å—ç‰¹å®šè§„èŒƒ

### 1. `lko-ecs` (æ ¸å¿ƒæ¡†æ¶)
- **å®šä½**: ECS æ ¸å¿ƒæ¶æ„ï¼Œæ‰€æœ‰ä¸šåŠ¡çš„åŸºç¡€ã€‚
- **çº¦æŸ**:
  - ä¸¥ç¦å¼•å…¥ä»»ä½•ä¸šåŠ¡é€»è¾‘ã€‚
  - è¿½æ±‚æè‡´æ€§èƒ½ (Zero Allocation in loops)ã€‚
  - ä¸¥ç¦ä¿®æ”¹æ ¸å¿ƒæ¥å£ (`World`, `Entity`) é™¤éç»è¿‡æ¶æ„è¯„å®¡ã€‚
  - å¿…é¡»ä¿æŒ 95%+ çš„æµ‹è¯•è¦†ç›–ç‡ã€‚

### 2. `lko-core` (åŸºç¡€åº“)
- **å®šä½**: é«˜æ€§èƒ½æ•°æ®ç»“æ„ä¸å·¥å…·ã€‚
- **çº¦æŸ**:
  - æ— å¤–éƒ¨ä¾èµ– (é™¤ Kotlin stdlib)ã€‚
  - æ‰€æœ‰é›†åˆç±» (`FastList`) å¿…é¡»åŒ…å«è¾¹ç•Œæ£€æŸ¥æµ‹è¯•ã€‚
  - ä¼˜å…ˆä½¿ç”¨åŸºæœ¬ç±»å‹ç‰¹åŒ–é›†åˆ (å¦‚ `IntFastList`) é¿å…è£…ç®±ã€‚

### 3. `business-core` (ä¸šåŠ¡æ ¸å¿ƒ)
- **å®šä½**: æ¸¸æˆé€šç”¨çš„ç»„ä»¶ (`Component`) å’Œæ ‡ç­¾ (`Tag`) å®šä¹‰ã€‚
- **çº¦æŸ**:
  - ä»…åŒ…å«æ•°æ®å®šä¹‰ (`data class`, `sealed class`)ã€‚
  - ä¸¥ç¦åŒ…å«ç³»ç»Ÿé€»è¾‘ (`System`)ã€‚
  - æ‰€æœ‰æ–°ç»„ä»¶å¿…é¡»æ³¨å†Œåˆ° `createAddon` ä¸­ã€‚

### 4. `business-engine` (æ¸¸æˆå¼•æ“)
- **å®šä½**: æ¸¸æˆå¾ªç¯ã€ä¸–ç•Œåˆå§‹åŒ–ã€ç³»ç»Ÿåè°ƒä¸ç»„è£… (`SectWorld`)ã€‚
- **åŒ…å«**:
  - `TimeSystem` - æ¸¸æˆæ—¶é—´æ¨è¿›
  - `MovementSystem` - Demo ç§»åŠ¨ç³»ç»Ÿ
  - `SectWorld` - ä¸–ç•Œåˆ›å»ºå’Œåˆå§‹åŒ–
  - `SectSystems` - ç³»ç»Ÿå®¹å™¨ï¼Œç»Ÿä¸€ç®¡ç†å„æ¨¡å—ç³»ç»Ÿ
- **çº¦æŸ**:
  - è´Ÿè´£ç»„è£…å…¶ä»–ä¸šåŠ¡æ¨¡å—ï¼Œæ˜¯å”¯ä¸€å¯ä»¥ä¾èµ–æ‰€æœ‰ `business-*` æ¨¡å—çš„åœ°æ–¹ã€‚
  - ä¸åŒ…å«å…·ä½“ç©æ³•é€»è¾‘ï¼Œåªè´Ÿè´£åè°ƒå’Œè°ƒç”¨å„æ¨¡å—ç³»ç»Ÿã€‚
  - é€šè¿‡ `SectWorld.getSystems(world)` è·å–æ‰€æœ‰ç³»ç»Ÿå®ä¾‹ã€‚

### 5. `business-cultivation` (ä¿®ç‚¼ç³»ç»Ÿ)
- **å®šä½**: å¼Ÿå­ä¿®ç‚¼ã€å¢ƒç•Œçªç ´ã€è¡Œä¸ºå†³ç­–ã€‚
- **åŒ…å«**:
  - `CultivationSystem` - ä¿®ä¸ºå¢é•¿å’Œå¢ƒç•Œçªç ´
  - `SimpleBehaviorSystem` - AI è¡Œä¸ºå†³ç­–ï¼ˆä¿®ç‚¼/ä¼‘æ¯/å·¥ä½œï¼‰
- **ä¾èµ–**: `business-core`, `lko-ecs`

### 6. `business-disciples` (å¼Ÿå­ç³»ç»Ÿ)
- **å®šä½**: å¼Ÿå­ä¿¡æ¯ç®¡ç†å’Œç»Ÿè®¡æŸ¥è¯¢ã€‚
- **åŒ…å«**:
  - `DiscipleInfoSystem` - å¼Ÿå­ä¿¡æ¯æŸ¥è¯¢
  - `DiscipleInfo` - å¼Ÿå­ä¿¡æ¯æ•°æ®ç±»
  - `DiscipleStatistics` - å¼Ÿå­ç»Ÿè®¡æ•°æ®
- **ä¾èµ–**: `business-core`, `lko-ecs`

### 7. `business-resource` (èµ„æºç³»ç»Ÿ)
- **å®šä½**: å®—é—¨èµ„æºçš„ç”Ÿäº§ã€æ¶ˆè€—å’Œä¿¸ç¦„ç®¡ç†ã€‚
- **åŒ…å«**:
  - `ResourceProductionSystem` - èµ„æºäº§å‡ºï¼ˆçµè„‰ã€çŸ¿è„‰ï¼‰
  - `ResourceConsumptionSystem` - èµ„æºæ¶ˆè€—ï¼ˆä¿¸ç¦„ã€ç»´æŠ¤è´¹ï¼‰
  - `ProductionRecord` - äº§å‡ºè®°å½•
  - `ConsumptionResult` - æ¶ˆè€—ç»“ç®—ç»“æœ
- **ä¾èµ–**: `business-core`, `lko-ecs`

### 8. `business-facility` (è®¾æ–½ç³»ç»Ÿ)
- **å®šä½**: å®—é—¨è®¾æ–½ç®¡ç†å’Œæ•´ä½“çŠ¶æ€ç›‘æ§ã€‚
- **åŒ…å«**:
  - `SectStatusSystem` - å®—é—¨çŠ¶æ€æ£€æµ‹ï¼ˆæ­£å¸¸/è­¦å‘Š/å±æ€¥/è§£æ•£ï¼‰
  - `FinancialSummary` - è´¢åŠ¡æ‘˜è¦
  - `SectStatus` - å®—é—¨çŠ¶æ€æšä¸¾
- **ä¾èµ–**: `business-core`, `lko-ecs`

### 9. `business-quest` (ä»»åŠ¡ç³»ç»Ÿ)
- **å®šä½**: ä»»åŠ¡ç³»ç»Ÿï¼ˆé¢„ç•™æ¨¡å—ï¼Œå¾…å®ç°ï¼‰ã€‚



## çº¦å®š

- **è¯­è¨€**: Kotlin (100%)
- **æ„å»ºç³»ç»Ÿ**: Gradle Kotlin DSL (`.gradle.kts`)
- **ECS é£æ ¼**:
    - **ç»„ä»¶**: `data class` (çº¯æ•°æ®)
    - **æ ‡ç­¾**: `sealed class` / `object` (æ— æ•°æ®æ ‡è®°)
    - **ç³»ç»Ÿ**: çº¯é€»è¾‘ï¼Œæ— çŠ¶æ€ (çŠ¶æ€å­˜ç»„ä»¶)
- **é›†åˆ**: ä¼˜å…ˆä½¿ç”¨ `lko-core` ä¸­çš„ `FastList`, `IntFastList` ç­‰é«˜æ€§èƒ½é›†åˆï¼Œè€Œé stdlib `List/ArrayList` (ECS å†…éƒ¨)ã€‚
- **æµ‹è¯•**:
    - ä½ç½®: `src/commonTest/kotlin`
    - é£æ ¼: BDD (`// Given`, `// When`, `// Then`)
    - åŠ©æ‰‹: ä½¿ç”¨ `createAddon` å¿«é€Ÿæ„å»ºæµ‹è¯• World

## åæ¨¡å¼ (Anti-Patterns)

| ç±»åˆ« | ç¦æ­¢è¡Œä¸º | æ›¿ä»£æ–¹æ¡ˆ |
|------|----------|----------|
| **ECS** | `addComponent(Tag)` / `addTag<Component>()` | ä¸¥æ ¼åŒºåˆ†ç»„ä»¶å’Œæ ‡ç­¾æ¥å£ |
| **ECS** | åœ¨ `query {}.forEach` ä¸­ä¿®æ”¹å®ä½“ç»“æ„ | æ”¶é›†å˜æ›´åç»Ÿä¸€å¤„ç†ï¼Œæˆ–ä½¿ç”¨å‘½ä»¤é˜Ÿåˆ— |
| **Kotlin** | éšå¼ `it` å‚æ•°åµŒå¥— | æ˜¾å¼å‘½åå‚æ•° `forEach { entity -> ... }` |
| **Import** | æ··æ·† `family.component` å’Œ `relation.component` | æ£€æŸ¥å¯¼å…¥åŒ…åï¼Œç¡®è®¤ç”¨é€” |
| **Git** | æäº¤å¤±è´¥çš„æµ‹è¯• | ä¿®å¤ä»£ç æˆ–æµ‹è¯• |
| **Git** | åŒ…å« `build/`, `.idea/` ç­‰ç”Ÿæˆæ–‡ä»¶ | æ£€æŸ¥ `.gitignore` |
| **ä»£ç ** | ä½¿ç”¨ `println` è°ƒè¯• | ä½¿ç”¨æ—¥å¿—æ¡†æ¶æˆ–æµ‹è¯•æ–­è¨€ |
| **ä¾èµ–** | æ¨¡å—é—´å¾ªç¯ä¾èµ– | ä½¿ç”¨ `lko-di` æˆ–é‡æ„æ¥å£ä¸‹æ²‰ |

## ä¾èµ– (Dependencies)

| åº“ | ç”¨é€” |
|----|------|
| `lko-ecs` | è‡ªç ”é«˜æ€§èƒ½ ECS æ¡†æ¶ |
| `lko-core` | é«˜æ€§èƒ½åŸºç¡€æ•°æ®ç»“æ„ |
| `compose-multiplatform` | è·¨å¹³å° UI |
| `kotlinx-coroutines` | å¼‚æ­¥ä»»åŠ¡ |
| `kotlinx-serialization` | æ•°æ®æŒä¹…åŒ– |
| `kodein-kaverit` | è¾…åŠ©å·¥å…· |

## å‘½ä»¤

```bash
# æ„å»º
./gradlew build                         # å…¨é‡æ„å»º
./gradlew :composeApp:run               # è¿è¡Œæ¡Œé¢ç‰ˆ Demo

# æµ‹è¯•
./gradlew test                          # è¿è¡Œæ‰€æœ‰æµ‹è¯•
./gradlew :libs:lko-ecs:test            # è¿è¡Œ ECS æ ¸å¿ƒæµ‹è¯•
./gradlew :business-modules:business-engine:test # è¿è¡Œä¸šåŠ¡é€»è¾‘æµ‹è¯•

# è´¨é‡
./gradlew allCoverage                   # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
./gradlew lint                          # é™æ€ä»£ç æ£€æŸ¥
```

## å¤æ‚åº¦çƒ­ç‚¹

| æ¨¡å—/æ–‡ä»¶ | æè¿° | æ³¨æ„äº‹é¡¹ |
|-----------|------|----------|
| `libs/lko-ecs/.../World.kt` | ECS ä¸–ç•Œæ ¸å¿ƒ | æå…¶å¤æ‚ï¼Œæ¶‰åŠç»„ä»¶å­˜å‚¨ã€å®ä½“ç®¡ç†ã€ç³»ç»Ÿè°ƒåº¦ |
| `libs/lko-ecs/.../QueryStreamExtensions.kt` | æŸ¥è¯¢ DSL | å¤æ‚çš„æ³›å‹å’Œå†…è”å‡½æ•°ï¼Œä¿®æ”¹éœ€è°¨æ… |
| `libs/lko-core/.../*FastList.kt` | é«˜æ€§èƒ½é›†åˆ | æ‰‹å†™ç‰¹å®šç±»å‹é›†åˆï¼Œæ³¨æ„æ‰©å®¹é€»è¾‘å’Œæ•°ç»„è¶Šç•Œ |
| `business-modules/.../SectWorld.kt` | æ¸¸æˆå…¥å£ | è´Ÿè´£ç»„è£…å„æ¨¡å—ï¼Œæ³¨æ„åˆå§‹åŒ–é¡ºåº |

## å¤‡æ³¨

- **æ€§èƒ½ä¼˜å…ˆ**: æ ¸å¿ƒ ECS é€»è¾‘ä¸­é¿å…é¢‘ç¹å¯¹è±¡åˆ†é… (GC å‹åŠ›)ã€‚
- **æ•°æ®é©±åŠ¨**: å°½é‡å°†é€»è¾‘é€šè¿‡ç»„ä»¶æ•°æ®é…ç½®ï¼Œè€Œéç¡¬ç¼–ç ã€‚
- **KMP**: ä¿æŒä»£ç å¹³å°æ— å…³æ€§ï¼Œç‰¹å®šå¹³å°é€»è¾‘æ”¾ `androidMain`/`jvmMain`ã€‚
