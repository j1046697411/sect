# å®—é—¨ä¿®çœŸå½•æ¸¸æˆå®ç°è§„èŒƒ

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®åç§°
å®—é—¨ä¿®çœŸå½•

### 1.2 é¡¹ç›®ç±»å‹
æ–‡å­—å†’é™©+ç­–ç•¥æ¨¡æ‹Ÿ+è§’è‰²æ‰®æ¼”

### 1.3 æ ¸å¿ƒæ¶æ„
åŸºäºECSï¼ˆå®ä½“-ç»„ä»¶-ç³»ç»Ÿï¼‰æ¡†æ¶çš„Kotlinå¤šå¹³å°åº”ç”¨

### 1.4 ç›®æ ‡å¹³å°
PC

## äºŒã€ECSæ¶æ„è®¾è®¡

### 2.1 æ ¸å¿ƒç»„ä»¶è®¾è®¡

| ç»„ä»¶åç§° | ç±»å‹ | åŠŸèƒ½æè¿° |
|---------|------|----------|
| **åŸºç¡€å±æ€§ç»„ä»¶** | æ•°æ® | å­˜å‚¨è§’è‰²çš„åŸºæœ¬å±æ€§ï¼ˆä¿®ä¸ºå¢ƒç•Œã€å¹´é¾„ã€æ€§åˆ«ã€æ°”è¡€ã€çµåŠ›ç­‰ï¼‰ |
| **èµ„è´¨å±æ€§ç»„ä»¶** | æ•°æ® | å­˜å‚¨è§’è‰²çš„èµ„è´¨å±æ€§ï¼ˆæ ¹éª¨ã€æ‚Ÿæ€§ã€ç¦ç¼˜ã€å¿ƒæ€§ã€ä½“è´¨ã€é­…åŠ›ç­‰ï¼‰ |
| **æ€§æ ¼å±æ€§ç»„ä»¶** | æ•°æ® | å­˜å‚¨è§’è‰²çš„æ€§æ ¼å±æ€§ï¼ˆé‡å¿ƒã€å‹¤å‹‰ã€å¿ è¯šã€å–„è‰¯ã€å‹‡æ°”ã€è°¨æ…ç­‰ï¼‰ |
| **ç¤¾ä¼šå±æ€§ç»„ä»¶** | æ•°æ® | å­˜å‚¨è§’è‰²çš„ç¤¾ä¼šå±æ€§ï¼ˆèŒåŠ¡ã€è´¡çŒ®ç‚¹ã€å£°æœ›ã€äººè„‰ç­‰ï¼‰ |
| **æŠ€èƒ½å±æ€§ç»„ä»¶** | æ•°æ® | å­˜å‚¨è§’è‰²çš„æŠ€èƒ½å±æ€§ï¼ˆç‚¼ä¸¹æŠ€èƒ½ã€ç‚¼å™¨æŠ€èƒ½ã€æˆ˜æ–—æŠ€èƒ½ã€ç®¡ç†æŠ€èƒ½ç­‰ï¼‰ |
| **èµ„æºç»„ä»¶** | æ•°æ® | å­˜å‚¨å®—é—¨çš„èµ„æºä¿¡æ¯ï¼ˆçµçŸ³ã€è´¡çŒ®ç‚¹ã€å„ç±»ææ–™ç­‰ï¼‰ |
| **è®¾æ–½ç»„ä»¶** | æ•°æ® | å­˜å‚¨è®¾æ–½çš„åŸºæœ¬ä¿¡æ¯ï¼ˆç±»å‹ã€ç­‰çº§ã€çŠ¶æ€ã€äº§å‡ºç­‰ï¼‰ |
| **åŒºåŸŸç»„ä»¶** | æ•°æ® | å­˜å‚¨æ¸¸æˆåŒºåŸŸçš„ä¿¡æ¯ï¼ˆç±»å‹ã€çŠ¶æ€ã€èµ„æºäº§å‡ºã€å é¢†ç¨‹åº¦ç­‰ï¼‰ |
| **åŠŸæ³•ç»„ä»¶** | æ•°æ® | å­˜å‚¨åŠŸæ³•çš„ä¿¡æ¯ï¼ˆç±»å‹ã€ç­‰çº§ã€æ•ˆæœã€ä¿®ç‚¼æ¡ä»¶ç­‰ï¼‰ |
| **ä»»åŠ¡ç»„ä»¶** | æ•°æ® | å­˜å‚¨ä»»åŠ¡çš„ä¿¡æ¯ï¼ˆç±»å‹ã€ç›®æ ‡ã€è¿›åº¦ã€å¥–åŠ±ç­‰ï¼‰ |
| **äº‹ä»¶ç»„ä»¶** | æ•°æ® | å­˜å‚¨äº‹ä»¶çš„ä¿¡æ¯ï¼ˆç±»å‹ã€è§¦å‘æ¡ä»¶ã€å¤„ç†ç»“æœç­‰ï¼‰ |
| **çŠ¶æ€ç»„ä»¶** | æ ‡è®° | æ ‡è®°è§’è‰²æˆ–è®¾æ–½çš„å½“å‰çŠ¶æ€ï¼ˆä¿®ç‚¼ä¸­ã€å·¥ä½œä¸­ã€ä¼‘æ¯ä¸­ã€å‡çº§ä¸­ç­‰ï¼‰ |
| **AIç»„ä»¶** | è¡Œä¸º | æ§åˆ¶AIè§’è‰²çš„è‡ªä¸»å†³ç­–å’Œè¡Œä¸ºæ‰§è¡Œ |
| **æˆ˜æ–—ç»„ä»¶** | è¡Œä¸º | å¤„ç†è§’è‰²çš„æˆ˜æ–—é€»è¾‘å’Œæˆ˜æ–—çŠ¶æ€ |
| **äº¤äº’ç»„ä»¶** | è¡Œä¸º | å¤„ç†è§’è‰²ä¹‹é—´çš„äº¤äº’å’Œç¤¾äº¤è¡Œä¸º |

### 2.2 æ ¸å¿ƒç³»ç»Ÿè®¾è®¡

| ç³»ç»Ÿåç§° | åŠŸèƒ½æè¿° | ä¾èµ–ç»„ä»¶ | æ‰§è¡Œé¢‘ç‡ |
|---------|----------|----------|----------|
| **æ—¶é—´ç³»ç»Ÿ** | ç®¡ç†æ¸¸æˆæ—¶é—´æµé€ã€å­£èŠ‚å˜åŒ–ã€è§’è‰²æˆé•¿å‘¨æœŸ | æ‰€æœ‰ç»„ä»¶ | æ¯å¸§ |
| **AIå†³ç­–ç³»ç»Ÿ** | æ§åˆ¶AIè§’è‰²çš„è‡ªä¸»å†³ç­–å’Œè¡Œä¸ºé€‰æ‹© | AIç»„ä»¶ã€åŸºç¡€å±æ€§ç»„ä»¶ã€çŠ¶æ€ç»„ä»¶ | æ¯å¸§ |
| **è¡Œä¸ºæ‰§è¡Œç³»ç»Ÿ** | æ‰§è¡Œè§’è‰²çš„å„ç§è¡Œä¸ºï¼ˆä¿®ç‚¼ã€å·¥ä½œã€ç¤¾äº¤ç­‰ï¼‰ | çŠ¶æ€ç»„ä»¶ã€æŠ€èƒ½å±æ€§ç»„ä»¶ | æ¯å¸§ |
| **æˆé•¿ç³»ç»Ÿ** | å¤„ç†è§’è‰²çš„ä¿®ä¸ºæå‡ã€å¢ƒç•Œçªç ´ã€æŠ€èƒ½æˆé•¿ | åŸºç¡€å±æ€§ç»„ä»¶ã€èµ„è´¨å±æ€§ç»„ä»¶ã€åŠŸæ³•ç»„ä»¶ | æ¯å¸§ |
| **èµ„æºç³»ç»Ÿ** | ç®¡ç†èµ„æºçš„è·å–ã€å­˜å‚¨ã€åˆ†é…å’Œæ¶ˆè€— | èµ„æºç»„ä»¶ã€è®¾æ–½ç»„ä»¶ã€åŒºåŸŸç»„ä»¶ | æ¯å¸§ |
| **è®¾æ–½ç³»ç»Ÿ** | ç®¡ç†è®¾æ–½çš„å»ºè®¾ã€ç»´æŠ¤ã€å‡çº§å’Œäº§å‡º | è®¾æ–½ç»„ä»¶ã€èµ„æºç»„ä»¶ | æ¯å¸§ |
| **åŒºåŸŸç³»ç»Ÿ** | ç®¡ç†åŒºåŸŸçš„å é¢†ã€å¼€å‘å’Œäº‹ä»¶è§¦å‘ | åŒºåŸŸç»„ä»¶ã€èµ„æºç»„ä»¶ã€äº‹ä»¶ç»„ä»¶ | æ¯å¸§ |
| **æˆ˜æ–—ç³»ç»Ÿ** | å¤„ç†æˆ˜æ–—é€»è¾‘ã€ä¼¤å®³è®¡ç®—ã€æˆ˜æ–—ç»“æœ | æˆ˜æ–—ç»„ä»¶ã€åŸºç¡€å±æ€§ç»„ä»¶ã€åŠŸæ³•ç»„ä»¶ | æˆ˜æ–—æ—¶ |
| **ç¤¾äº¤ç³»ç»Ÿ** | å¤„ç†è§’è‰²ä¹‹é—´çš„å…³ç³»å˜åŒ–å’Œç¤¾äº¤è¡Œä¸º | ç¤¾äº¤ç»„ä»¶ã€æ€§æ ¼å±æ€§ç»„ä»¶ | æ¯å¸§ |
| **ä»»åŠ¡ç³»ç»Ÿ** | ç®¡ç†ä»»åŠ¡çš„ç”Ÿæˆã€æ¥å—ã€å®Œæˆå’Œå¥–åŠ± | ä»»åŠ¡ç»„ä»¶ã€ç¤¾ä¼šå±æ€§ç»„ä»¶ | æ¯å¸§ |
| **äº‹ä»¶ç³»ç»Ÿ** | ç”Ÿæˆå’Œå¤„ç†éšæœºäº‹ä»¶å’Œå‰§æƒ…äº‹ä»¶ | äº‹ä»¶ç»„ä»¶ã€èµ„æºç»„ä»¶ã€åŒºåŸŸç»„ä»¶ | éšæœº |
| **UIç³»ç»Ÿ** | ç®¡ç†æ¸¸æˆç•Œé¢çš„æ¸²æŸ“ã€äº¤äº’å’ŒçŠ¶æ€æ›´æ–° | æ‰€æœ‰ç»„ä»¶ | æ¯å¸§ |

### 2.3 ç³»ç»Ÿç®¡é“è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç³»ç»Ÿæ‰§è¡Œé¡ºåº                                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é˜¶æ®µ      â”‚ æ‰§è¡Œç³»ç»Ÿ                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆå§‹åŒ–    â”‚ èµ„æºç³»ç»Ÿã€è®¾æ–½ç³»ç»Ÿã€åŒºåŸŸç³»ç»Ÿã€è§’è‰²ç³»ç»Ÿ                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å…¥å¤„ç†  â”‚ UIç³»ç»Ÿ                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€»è¾‘æ›´æ–°  â”‚ æ—¶é—´ç³»ç»Ÿ â†’ AIå†³ç­–ç³»ç»Ÿ â†’ è¡Œä¸ºæ‰§è¡Œç³»ç»Ÿ â†’ æˆé•¿ç³»ç»Ÿ â†’ æˆ˜æ–—ç³»ç»Ÿ â†’ ç¤¾äº¤ç³»ç»Ÿ â†’ ä»»åŠ¡ç³»ç»Ÿ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ äº‹ä»¶å¤„ç†  â”‚ äº‹ä»¶ç³»ç»Ÿ                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ èµ„æºæ›´æ–°  â”‚ èµ„æºç³»ç»Ÿã€è®¾æ–½ç³»ç»Ÿã€åŒºåŸŸç³»ç»Ÿ                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UIæ›´æ–°    â”‚ UIç³»ç»Ÿ                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å­˜æ¡£å¤„ç†  â”‚ å­˜æ¡£ç³»ç»Ÿ                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½å®ç°

### 3.1 è§’è‰²ç³»ç»Ÿ

#### 3.1.1 è§’è‰²åˆ›å»ºä¸åˆå§‹åŒ–

```kotlin
// è§’è‰²åˆ›å»ºç¤ºä¾‹
fun World.createCharacter(configuration: EntityCreateContext.(Entity) -> Unit): Entity {
    return entity {
        // æ·»åŠ åŸºç¡€å±æ€§ç»„ä»¶
        it.addComponent(BaseAttributes("ç‚¼æ°”", "åˆæœŸ", 18, "ç”·", 100, 100))
        // æ·»åŠ èµ„è´¨å±æ€§ç»„ä»¶
        it.addComponent(QualificationAttributes(50, 50, 50, 50, 50, 50))
        // æ·»åŠ æ€§æ ¼å±æ€§ç»„ä»¶
        it.addComponent(PersonalityAttributes(50, 50, 50, 50, 50, 50))
        // æ·»åŠ ç¤¾ä¼šå±æ€§ç»„ä»¶
        it.addComponent(SocialAttributes("å¤–é—¨å¼Ÿå­", 0, 0, mutableListOf()))
        // æ·»åŠ æŠ€èƒ½å±æ€§ç»„ä»¶
        it.addComponent(SkillAttributes(0, 0, 0, 0, 0, 0))
        // æ·»åŠ AIç»„ä»¶
        it.addComponent(AIComponent())
        // æ·»åŠ çŠ¶æ€ç»„ä»¶
        it.addComponent(StateComponent("idle"))
        // æ‰§è¡Œé…ç½®
        configuration(it)
    }
}
```

#### 3.1.2 ä¿®ä¸ºæå‡æœºåˆ¶

```kotlin
// ä¿®ä¸ºæå‡ç³»ç»Ÿç¤ºä¾‹
class CultivationSystem : System {
    override fun update(deltaTime: Float) {
        // æŸ¥è¯¢æ‰€æœ‰å¤„äºä¿®ç‚¼çŠ¶æ€çš„è§’è‰²
        world.query {
            entityFilter {
                hasComponent<StateComponent> { state == "cultivating" }
                hasComponent<BaseAttributes>()
                hasComponent<QualificationAttributes>()
                hasComponent<SkillAttributes>()
            }
            eachEntity {
                val baseAttrs = getComponent<BaseAttributes>()
                val qualAttrs = getComponent<QualificationAttributes>()
                val skillAttrs = getComponent<SkillAttributes>()
                
                // è®¡ç®—ä¿®ç‚¼è¿›åº¦
                val cultivationSpeed = calculateCultivationSpeed(baseAttrs, qualAttrs)
                baseAttrs.cultivationProgress += cultivationSpeed * deltaTime
                
                // æ£€æŸ¥æ˜¯å¦çªç ´å¢ƒç•Œ
                if (baseAttrs.cultivationProgress >= 100) {
                    attemptBreakthrough(baseAttrs, qualAttrs, skillAttrs)
                }
            }
        }
    }
    
    private fun calculateCultivationSpeed(baseAttrs: BaseAttributes, qualAttrs: QualificationAttributes): Float {
        // æ ¹æ®æ ¹éª¨ã€æ‚Ÿæ€§ã€å½“å‰å¢ƒç•Œç­‰å› ç´ è®¡ç®—ä¿®ç‚¼é€Ÿåº¦
        return (qualAttrs.rootBone * 0.5f + qualAttrs.understanding * 0.5f) / getRealmFactor(baseAttrs.realm)
    }
    
    private fun attemptBreakthrough(baseAttrs: BaseAttributes, qualAttrs: QualificationAttributes, skillAttrs: SkillAttributes) {
        // è®¡ç®—çªç ´æˆåŠŸç‡
        val successRate = calculateBreakthroughSuccessRate(baseAttrs, qualAttrs)
        val random = Random.nextFloat()
        
        if (random < successRate) {
            // çªç ´æˆåŠŸ
            advanceRealm(baseAttrs, qualAttrs, skillAttrs)
        } else {
            // çªç ´å¤±è´¥
            handleBreakthroughFailure(baseAttrs, qualAttrs)
        }
    }
    
    // å…¶ä»–è¾…åŠ©æ–¹æ³•...
}
```

### 3.2 å®—é—¨ç®¡ç†ç³»ç»Ÿ

#### 3.2.1 èµ„æºç®¡ç†

```kotlin
// èµ„æºç»„ä»¶ç¤ºä¾‹
data class ResourceComponent(
    val spiritStone: Int = 0,            // çµçŸ³
    val contributionPoint: Int = 0,      // è´¡çŒ®ç‚¹
    val food: Int = 0,                   // ç²®é£Ÿ
    val cloth: Int = 0,                  // å¸ƒæ–™
    val wood: Int = 0,                   // æœ¨æ
    val ore: Int = 0,                    // çŸ¿çŸ³
    val herbs: MutableMap<String, Int> = mutableMapOf(),  // çµè‰
    val materials: MutableMap<String, Int> = mutableMapOf() // ææ–™
)

// èµ„æºç³»ç»Ÿç¤ºä¾‹
class ResourceSystem : System {
    override fun update(deltaTime: Float) {
        // å¤„ç†è®¾æ–½äº§å‡º
        processFacilityProduction(deltaTime)
        // å¤„ç†èµ„æºæ¶ˆè€—
        processResourceConsumption(deltaTime)
        // å¤„ç†èµ„æºäº¤æ˜“
        processResourceTrading(deltaTime)
    }
    
    private fun processFacilityProduction(deltaTime: Float) {
        // æŸ¥è¯¢æ‰€æœ‰è®¾æ–½
        world.query {
            entityFilter {
                hasComponent<FacilityComponent>()
                hasComponent<StateComponent> { state == "operating" }
            }
            eachEntity {
                val facility = getComponent<FacilityComponent>()
                val production = calculateProduction(facility)
                // å°†äº§å‡ºæ·»åŠ åˆ°å®—é—¨èµ„æº
                updateSectResources(production * deltaTime)
            }
        }
    }
    
    // å…¶ä»–è¾…åŠ©æ–¹æ³•...
}
```

#### 3.2.2 è®¾æ–½ç®¡ç†

```kotlin
// è®¾æ–½ç»„ä»¶ç¤ºä¾‹
data class FacilityComponent(
    val type: String,            // è®¾æ–½ç±»å‹ï¼ˆçµç”°ã€ç‚¼ä¸¹æˆ¿ã€ç‚¼å™¨é˜ç­‰ï¼‰
    val level: Int,              // è®¾æ–½ç­‰çº§
    val state: String,           // è®¾æ–½çŠ¶æ€ï¼ˆå»ºè®¾ä¸­ã€è¿è¡Œä¸­ã€ç»´æŠ¤ä¸­ã€ç©ºé—²ç­‰ï¼‰
    val production: Map<String, Float>,  // æ¯å°æ—¶äº§å‡º
    val consumption: Map<String, Float>, // æ¯å°æ—¶æ¶ˆè€—
    val upgradeRequirements: Map<String, Int>, // å‡çº§æ‰€éœ€èµ„æº
    val effect: Map<String, Float>  // è®¾æ–½æ•ˆæœï¼ˆåŠ æˆç­‰ï¼‰
)

// è®¾æ–½ç³»ç»Ÿç¤ºä¾‹
class FacilitySystem : System {
    override fun update(deltaTime: Float) {
        // å¤„ç†è®¾æ–½å»ºè®¾
        processFacilityConstruction(deltaTime)
        // å¤„ç†è®¾æ–½å‡çº§
        processFacilityUpgrade(deltaTime)
        // å¤„ç†è®¾æ–½ç»´æŠ¤
        processFacilityMaintenance(deltaTime)
    }
    
    private fun processFacilityConstruction(deltaTime: Float) {
        // æŸ¥è¯¢æ‰€æœ‰å»ºè®¾ä¸­çš„è®¾æ–½
        world.query {
            entityFilter {
                hasComponent<FacilityComponent>()
                hasComponent<StateComponent> { state == "constructing" }
                hasComponent<ConstructionComponent>()
            }
            eachEntity {
                val construction = getComponent<ConstructionComponent>()
                construction.progress += construction.speed * deltaTime
                
                // æ£€æŸ¥æ˜¯å¦å»ºè®¾å®Œæˆ
                if (construction.progress >= 100) {
                    // å»ºè®¾å®Œæˆï¼Œæ›´æ–°è®¾æ–½çŠ¶æ€
                    val facility = getComponent<FacilityComponent>()
                    setComponent<StateComponent>(StateComponent("idle"))
                    // ç§»é™¤å»ºè®¾ç»„ä»¶
                    removeComponent<ConstructionComponent>()
                }
            }
        }
    }
    
    // å…¶ä»–è¾…åŠ©æ–¹æ³•...
}
```

### 3.3 æˆ˜æ–—ç³»ç»Ÿ

```kotlin
// æˆ˜æ–—ç»„ä»¶ç¤ºä¾‹
data class CombatComponent(
    val combatants: List<Entity>,   // å‚æˆ˜è§’è‰²åˆ—è¡¨
    val turn: Int,                  // å½“å‰å›åˆ
    val currentCombatant: Int,      // å½“å‰è¡ŒåŠ¨è§’è‰²ç´¢å¼•
    val combatLog: MutableList<String>,  // æˆ˜æ–—æ—¥å¿—
    val status: String              // æˆ˜æ–—çŠ¶æ€ï¼ˆæœªå¼€å§‹ã€è¿›è¡Œä¸­ã€å·²ç»“æŸï¼‰
)

// æˆ˜æ–—ç³»ç»Ÿç¤ºä¾‹
class CombatSystem : System {
    override fun update(deltaTime: Float) {
        // æŸ¥è¯¢æ‰€æœ‰æˆ˜æ–—
        world.query {
            entityFilter {
                hasComponent<CombatComponent> { status == "in_progress" }
            }
            eachEntity {
                val combat = getComponent<CombatComponent>()
                
                // è·å–å½“å‰è¡ŒåŠ¨è§’è‰²
                val currentEntity = combat.combatants[combat.currentCombatant]
                val currentBaseAttrs = currentEntity.getComponent<BaseAttributes>()
                val currentCombatAttrs = currentEntity.getComponent<CombatAttributes>()
                
                // å¤„ç†å½“å‰è§’è‰²çš„è¡ŒåŠ¨
                processCombatantAction(currentEntity, combat)
                
                // æ£€æŸ¥æˆ˜æ–—æ˜¯å¦ç»“æŸ
                if (checkCombatEnd(combat)) {
                    endCombat(combat)
                } else {
                    // è¿›å…¥ä¸‹ä¸€å›åˆ
                    nextTurn(combat)
                }
            }
        }
    }
    
    private fun processCombatantAction(entity: Entity, combat: CombatComponent) {
        // å¦‚æœæ˜¯ç©å®¶æ§åˆ¶çš„è§’è‰²ï¼Œç­‰å¾…ç©å®¶è¾“å…¥
        if (entity.hasComponent<PlayerComponent>()) {
            // ç­‰å¾…ç©å®¶è¾“å…¥...
        } else {
            // AIè§’è‰²è‡ªä¸»é€‰æ‹©è¡ŒåŠ¨
            val aiComponent = entity.getComponent<AIComponent>()
            val action = aiComponent.chooseCombatAction(combat)
            executeCombatAction(entity, action, combat)
        }
    }
    
    // å…¶ä»–è¾…åŠ©æ–¹æ³•...
}
```

### 3.4 ä»»åŠ¡ä¸äº‹ä»¶ç³»ç»Ÿ

```kotlin
// ä»»åŠ¡ç»„ä»¶ç¤ºä¾‹
data class TaskComponent(
    val id: String,               // ä»»åŠ¡ID
    val type: String,             // ä»»åŠ¡ç±»å‹ï¼ˆä¸»çº¿ã€æ—¥å¸¸ã€å§”æ‰˜ç­‰ï¼‰
    val title: String,            // ä»»åŠ¡æ ‡é¢˜
    val description: String,      // ä»»åŠ¡æè¿°
    val objectives: List<TaskObjective>, // ä»»åŠ¡ç›®æ ‡
    val progress: Map<String, Float>, // ä»»åŠ¡è¿›åº¦
    val rewards: Map<String, Int>, // ä»»åŠ¡å¥–åŠ±
    val status: String,           // ä»»åŠ¡çŠ¶æ€ï¼ˆæœªæ¥å—ã€è¿›è¡Œä¸­ã€å·²å®Œæˆã€å·²å¤±è´¥ï¼‰
    val deadline: Long?           // ä»»åŠ¡æˆªæ­¢æ—¶é—´ï¼ˆå¯é€‰ï¼‰
)

// äº‹ä»¶ç»„ä»¶ç¤ºä¾‹
data class EventComponent(
    val id: String,               // äº‹ä»¶ID
    val type: String,             // äº‹ä»¶ç±»å‹ï¼ˆèµ„æºã€å¦–å…½ã€å¤©æ°”ã€ç§˜å¢ƒç­‰ï¼‰
    val title: String,            // äº‹ä»¶æ ‡é¢˜
    val description: String,      // äº‹ä»¶æè¿°
    val options: List<EventOption>, // äº‹ä»¶é€‰é¡¹
    val triggeredAt: Long,        // äº‹ä»¶è§¦å‘æ—¶é—´
    val status: String,           // äº‹ä»¶çŠ¶æ€ï¼ˆæœªå¤„ç†ã€å¤„ç†ä¸­ã€å·²å¤„ç†ï¼‰
    val effect: Map<String, Any>  // äº‹ä»¶æ•ˆæœ
)

// äº‹ä»¶ç³»ç»Ÿç¤ºä¾‹
class EventSystem : System {
    override fun update(deltaTime: Float) {
        // ç”Ÿæˆéšæœºäº‹ä»¶
        generateRandomEvents()
        // å¤„ç†ç©å®¶é€‰æ‹©çš„äº‹ä»¶é€‰é¡¹
        processEventOptions()
        // æ›´æ–°äº‹ä»¶çŠ¶æ€
        updateEventStatus()
    }
    
    private fun generateRandomEvents() {
        // æ ¹æ®å½“å‰æ¸¸æˆçŠ¶æ€å’Œæ¦‚ç‡ç”Ÿæˆéšæœºäº‹ä»¶
        if (Random.nextFloat() < EVENT_GENERATION_PROBABILITY) {
            val event = createRandomEvent()
            // åˆ›å»ºäº‹ä»¶å®ä½“
            world.entity {
                it.addComponent(event)
                it.addComponent(EventComponent(event.id, event.type, event.title, event.description, 
                                              event.options, world.time, "pending", emptyMap()))
            }
        }
    }
    
    // å…¶ä»–è¾…åŠ©æ–¹æ³•...
}
```

## å››ã€ç•Œé¢å®ç°

### 4.1 ç•Œé¢æ¶æ„

é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬ï¼š

1. **UIç»„ä»¶å±‚**ï¼šåŸºç¡€UIç»„ä»¶ï¼ˆæŒ‰é’®ã€æ ‡ç­¾ã€åˆ—è¡¨ã€è¡¨æ ¼ç­‰ï¼‰
2. **ç•Œé¢å¸ƒå±€å±‚**ï¼šå„ä¸ªæ¸¸æˆç•Œé¢çš„å¸ƒå±€è®¾è®¡
3. **äº¤äº’æ§åˆ¶å±‚**ï¼šå¤„ç†ç”¨æˆ·è¾“å…¥å’Œç•Œé¢äº¤äº’
4. **æ•°æ®ç»‘å®šå±‚**ï¼šå°†æ¸¸æˆæ•°æ®ä¸ç•Œé¢å…ƒç´ ç»‘å®š
5. **çŠ¶æ€ç®¡ç†å±‚**ï¼šç®¡ç†ç•Œé¢çš„çŠ¶æ€å˜åŒ–

### 4.2 æ ¸å¿ƒç•Œé¢å®ç°

#### 4.2.1 å®—é—¨æ€»è§ˆç•Œé¢

```kotlin
// å®—é—¨æ€»è§ˆç•Œé¢ç¤ºä¾‹
class SectOverviewScreen(private val world: World) : Screen {
    override fun render() {
        // æ¸²æŸ“é¡¶éƒ¨å¯¼èˆªæ 
        renderTopNavBar()
        // æ¸²æŸ“å·¦ä¾§èœå•æ 
        renderLeftMenuBar()
        // æ¸²æŸ“ä¸­å¤®å†…å®¹åŒº
        renderCentralContent()
        // æ¸²æŸ“å³ä¾§ä¿¡æ¯åŒº
        renderRightInfoPanel()
        // æ¸²æŸ“åº•éƒ¨çŠ¶æ€æ 
        renderBottomStatusBar()
    }
    
    private fun renderCentralContent() {
        // è·å–å®—é—¨å®ä½“
        val sectEntity = world.queryFirst { hasComponent<SectComponent>() }
        val sect = sectEntity.getComponent<SectComponent>()
        val resources = sectEntity.getComponent<ResourceComponent>()
        
        // æ¸²æŸ“å®—é—¨åŸºæœ¬ä¿¡æ¯
        println("ã€å®—é—¨åŸºæœ¬ä¿¡æ¯ã€‘")
        println("ğŸ”¹ å®—é—¨åç§°ï¼š${sect.name}Â·${sect.location} Â· å®—é—¨ç­‰çº§ï¼š${sect.level}é˜¶ Â· å®—é—¨ç±»å‹ï¼š${sect.type}")
        println("ğŸ”¹ åˆ›å»ºæ—¶é—´ï¼šä¿®çœŸçºªå…ƒ${sect.createdYear}å¹´Â·${sect.createdMonth}æœˆ Â· ç¨³å®šåº¦ï¼š${sect.stability}% Â· å‘å±•è¶‹åŠ¿ï¼š${sect.developmentTrend}")
        
        // æ¸²æŸ“æ ¸å¿ƒæ•°æ®ç»Ÿè®¡
        println("ã€æ ¸å¿ƒæ•°æ®ç»Ÿè®¡ã€‘")
        renderDataTable(listOf(
            listOf("å¼Ÿå­æ€»æ•°", "${sect.totalDisciples}/${sect.maxDisciples}"),
            listOf("çµçŸ³å‚¨å¤‡", "${resources.spiritStone}/${sect.maxSpiritStone}"),
            listOf("è®¾æ–½æ•°é‡", "${sect.totalFacilities}/${sect.maxFacilities}"),
            listOf("å é¢†åŒºåŸŸ", "${sect.occupiedRegions}/${sect.maxRegions}")
        ))
        
        // æ¸²æŸ“å…¶ä»–å†…å®¹...
    }
    
    // å…¶ä»–è¾…åŠ©æ–¹æ³•...
}
```

#### 4.2.2 å¼Ÿå­ç®¡ç†ç•Œé¢

```kotlin
// å¼Ÿå­ç®¡ç†ç•Œé¢ç¤ºä¾‹
class DiscipleManagementScreen(private val world: World) : Screen {
    override fun render() {
        // æ¸²æŸ“é¡¶éƒ¨å¯¼èˆªæ 
        renderTopNavBar()
        // æ¸²æŸ“å·¦ä¾§èœå•æ 
        renderLeftMenuBar()
        // æ¸²æŸ“ä¸­å¤®å¼Ÿå­åˆ—è¡¨
        renderDiscipleList()
        // æ¸²æŸ“å³ä¾§å¼Ÿå­è¯¦æƒ…
        renderDiscipleDetails()
        // æ¸²æŸ“åº•éƒ¨çŠ¶æ€æ 
        renderBottomStatusBar()
    }
    
    private fun renderDiscipleList() {
        // æŸ¥è¯¢æ‰€æœ‰å¼Ÿå­
        val disciples = world.query {
            entityFilter {
                hasComponent<BaseAttributes>()
                hasComponent<SocialAttributes> {èŒåŠ¡ != "å‡¡ä¿—ç™¾å§“" && èŒåŠ¡ != "å®—é—¨æ‚å½¹"}
            }
        }
        
        println("ã€å¼Ÿå­åˆ—è¡¨ã€‘")
        println("ID | å§“å | å¢ƒç•Œ | èŒåŠ¡ | è´¡çŒ®ç‚¹ | çŠ¶æ€")
        println("â”€" * 80)
        
        disciples.forEachEntity {
            val baseAttrs = getComponent<BaseAttributes>()
            val socialAttrs = getComponent<SocialAttributes>()
            val state = getComponent<StateComponent>().state
            
            println("${entity.id} | ${baseAttrs.name} | ${baseAttrs.realm}${baseAttrs.realmStage} | ${socialAttrs.position} | ${socialAttrs.contributionPoint} | $state")
        }
    }
    
    // å…¶ä»–è¾…åŠ©æ–¹æ³•...
}
```

### 4.3 äº¤äº’ç³»ç»Ÿ

```kotlin
// äº¤äº’ç³»ç»Ÿç¤ºä¾‹
class InteractionSystem(private val inputHandler: InputHandler) : System {
    override fun update(deltaTime: Float) {
        // å¤„ç†ç”¨æˆ·è¾“å…¥
        val input = inputHandler.getInput()
        processInput(input)
        
        // æ›´æ–°ç•Œé¢çŠ¶æ€
        updateUIState()
        
        // å¤„ç†å¿«æ·é”®
        processShortcuts(input)
    }
    
    private fun processInput(input: Input) {
        when (input.type) {
            InputType.MENU_SELECT -> handleMenuSelect(input.data as Int)
            InputType.BUTTON_CLICK -> handleButtonClick(input.data as String)
            InputType.TEXT_INPUT -> handleTextInput(input.data as String)
            InputType.KEY_PRESS -> handleKeyPress(input.data as KeyEvent)
            // å…¶ä»–è¾“å…¥ç±»å‹...
        }
    }
    
    private fun processShortcuts(input: Input) {
        if (input.type == InputType.KEY_PRESS) {
            val keyEvent = input.data as KeyEvent
            when (keyEvent.key) {
                KeyEvent.VK_1 -> switchToScreen("sectOverview")
                KeyEvent.VK_2 -> switchToScreen("discipleManagement")
                KeyEvent.VK_3 -> switchToScreen("resourceManagement")
                KeyEvent.VK_4 -> switchToScreen("facilityConstruction")
                KeyEvent.VK_F1 -> showHelp()
                KeyEvent.VK_ESCAPE -> toggleMenu()
                // å…¶ä»–å¿«æ·é”®...
            }
        }
    }
    
    // å…¶ä»–è¾…åŠ©æ–¹æ³•...
}
```

## äº”ã€æ¸¸æˆæµç¨‹è®¾è®¡

### 5.1 æ¸¸æˆåˆå§‹åŒ–æµç¨‹

1. åˆå§‹åŒ–ECSä¸–ç•Œ
2. åŠ è½½æ¸¸æˆé…ç½®
3. åˆ›å»ºåˆå§‹å®—é—¨å®ä½“
4. åˆ›å»ºåˆå§‹å¼Ÿå­å’ŒNPC
5. ç”Ÿæˆåˆå§‹è®¾æ–½å’Œèµ„æº
6. ç”Ÿæˆåˆå§‹åŒºåŸŸå’Œåœ°å›¾
7. åˆå§‹åŒ–UIç³»ç»Ÿ
8. è¿›å…¥ä¸»èœå•

### 5.2 ä¸»æ¸¸æˆå¾ªç¯

```kotlin
// ä¸»æ¸¸æˆå¾ªç¯ç¤ºä¾‹
class GameLoop(private val world: World, private val uiSystem: UISystem) {
    private var isRunning = true
    private val timeSystem = world.getSystem<TimeSystem>()
    private val inputHandler = InputHandler()
    
    fun start() {
        while (isRunning) {
            // å¤„ç†è¾“å…¥
            val input = inputHandler.pollInput()
            uiSystem.processInput(input)
            
            // æ›´æ–°æ—¶é—´
            val deltaTime = timeSystem.update()
            
            // æ›´æ–°æ‰€æœ‰ç³»ç»Ÿ
            world.updateSystems(deltaTime)
            
            // æ¸²æŸ“UI
            uiSystem.render()
            
            // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
            if (checkGameEnd()) {
                isRunning = false
            }
        }
    }
    
    private fun checkGameEnd(): Boolean {
        // æ£€æŸ¥æ¸¸æˆç»“æŸæ¡ä»¶
        // ä¾‹å¦‚ï¼šå®—é—¨æ¯ç­ã€ç©å®¶è§’è‰²æ­»äº¡ã€è¾¾åˆ°æ¸¸æˆç›®æ ‡ç­‰
        return false
    }
}
```

## å…­ã€æŠ€æœ¯å®ç°ç»†èŠ‚

### 6.1 å¤šå¹³å°æ”¯æŒ

é‡‡ç”¨Kotlin MultiplatformæŠ€æœ¯ï¼Œæ”¯æŒä»¥ä¸‹å¹³å°ï¼š
- JVMï¼ˆPCæ¡Œé¢åº”ç”¨ï¼‰
- Webï¼ˆæµè§ˆå™¨ï¼‰
- Androidï¼ˆå¯é€‰ï¼‰
- iOSï¼ˆå¯é€‰ï¼‰

### 6.2 æ•°æ®æŒä¹…åŒ–

ä½¿ç”¨SQLDelightæˆ–SQLiteè¿›è¡Œæ•°æ®æŒä¹…åŒ–ï¼Œæ”¯æŒï¼š
- æ¸¸æˆå­˜æ¡£
- è§’è‰²æ•°æ®å­˜å‚¨
- å®—é—¨æ•°æ®å­˜å‚¨
- æ¸¸æˆè¿›åº¦ä¿å­˜

### 6.3 æ€§èƒ½ä¼˜åŒ–

1. **ECSæ¶æ„ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨ Archetype ä¼˜åŒ–å®ä½“æŸ¥è¯¢
   - ç³»ç»Ÿæ‰§è¡Œé¡ºåºä¼˜åŒ–
   - ç»„ä»¶è®¿é—®ä¼˜åŒ–

2. **AIä¼˜åŒ–**ï¼š
   - åˆ†çº§AIå†³ç­–ï¼ˆç®€å•AIå’Œå¤æ‚AIï¼‰
   - AIè¡Œä¸ºç¼“å­˜
   - æ‰¹é‡AIæ›´æ–°

3. **æ¸²æŸ“ä¼˜åŒ–**ï¼š
   - ç•Œé¢å…ƒç´ ç¼“å­˜
   - å±€éƒ¨åˆ·æ–°
   - å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“

4. **å†…å­˜ä¼˜åŒ–**ï¼š
   - å¯¹è±¡æ± å¤ç”¨
   - å‡å°‘åƒåœ¾å›æ”¶
   - å†…å­˜ä½¿ç”¨ç›‘æ§

### 6.4 æµ‹è¯•ç­–ç•¥

1. **å•å…ƒæµ‹è¯•**ï¼šæµ‹è¯•æ ¸å¿ƒé€»è¾‘å’Œç®—æ³•
2. **é›†æˆæµ‹è¯•**ï¼šæµ‹è¯•ç³»ç»Ÿä¹‹é—´çš„äº¤äº’
3. **æ€§èƒ½æµ‹è¯•**ï¼šæµ‹è¯•æ¸¸æˆåœ¨å¤§é‡å®ä½“ä¸‹çš„æ€§èƒ½
4. **åŠŸèƒ½æµ‹è¯•**ï¼šæµ‹è¯•æ¸¸æˆåŠŸèƒ½æ˜¯å¦ç¬¦åˆéœ€æ±‚
5. **ç”¨æˆ·æµ‹è¯•**ï¼šæµ‹è¯•æ¸¸æˆçš„å¯ç©æ€§å’Œç”¨æˆ·ä½“éªŒ

## ä¸ƒã€å¼€å‘è®¡åˆ’

### 7.1 å¼€å‘é˜¶æ®µ

| é˜¶æ®µ | æ—¶é—´ | ä¸»è¦ä»»åŠ¡ |
|------|------|----------|
| 1. åŸºç¡€æ¡†æ¶æ­å»º | ç¬¬1-2å‘¨ | æ­å»ºECSæ¡†æ¶ã€å®ç°æ ¸å¿ƒç»„ä»¶å’Œç³»ç»Ÿã€å¼€å‘åŸºç¡€UI |
| 2. æ ¸å¿ƒåŠŸèƒ½å¼€å‘ | ç¬¬3-4å‘¨ | å®ç°è§’è‰²ç³»ç»Ÿã€å®—é—¨ç®¡ç†ç³»ç»Ÿã€æˆ˜æ–—ç³»ç»Ÿ |
| 3. æ‰©å±•åŠŸèƒ½å¼€å‘ | ç¬¬5-6å‘¨ | å®ç°ä»»åŠ¡ç³»ç»Ÿã€äº‹ä»¶ç³»ç»Ÿã€ç¤¾äº¤ç³»ç»Ÿã€è¯•ç‚¼ç³»ç»Ÿ |
| 4. ä¼˜åŒ–ä¸æµ‹è¯• | ç¬¬7å‘¨ | æ€§èƒ½ä¼˜åŒ–ã€bugä¿®å¤ã€åŠŸèƒ½æµ‹è¯•ã€ç”¨æˆ·æµ‹è¯• |

### 7.2 é‡Œç¨‹ç¢‘

1. **é‡Œç¨‹ç¢‘1**ï¼šåŸºç¡€æ¡†æ¶å®Œæˆï¼Œèƒ½å¤Ÿåˆ›å»ºè§’è‰²å’Œå®—é—¨
2. **é‡Œç¨‹ç¢‘2**ï¼šæ ¸å¿ƒåŠŸèƒ½å®Œæˆï¼Œèƒ½å¤Ÿè¿›è¡Œä¿®ç‚¼ã€å»ºè®¾ã€æˆ˜æ–—ç­‰åŸºæœ¬æ“ä½œ
3. **é‡Œç¨‹ç¢‘3**ï¼šæ‰©å±•åŠŸèƒ½å®Œæˆï¼Œæ¸¸æˆå†…å®¹ä¸°å¯Œå®Œæ•´
4. **é‡Œç¨‹ç¢‘4**ï¼šæµ‹è¯•é€šè¿‡ï¼Œæ¸¸æˆç¨³å®šè¿è¡Œï¼Œç”¨æˆ·ä½“éªŒè‰¯å¥½

## å…«ã€ä»£ç è§„èŒƒ

### 8.1 å‘½åè§„èŒƒ

1. **åŒ…å**ï¼šä½¿ç”¨å°å†™å­—æ¯ï¼Œå•è¯ä¹‹é—´ç”¨ç‚¹åˆ†éš”ï¼Œä¾‹å¦‚ï¼š`cn.jzl.sect.system`
2. **ç±»å**ï¼šä½¿ç”¨å¤§é©¼å³°å‘½åæ³•ï¼Œä¾‹å¦‚ï¼š`CultivationSystem`
3. **æ–¹æ³•å**ï¼šä½¿ç”¨å°é©¼å³°å‘½åæ³•ï¼Œä¾‹å¦‚ï¼š`calculateCultivationSpeed`
4. **å˜é‡å**ï¼šä½¿ç”¨å°é©¼å³°å‘½åæ³•ï¼Œä¾‹å¦‚ï¼š`cultivationProgress`
5. **å¸¸é‡å**ï¼šä½¿ç”¨å…¨å¤§å†™ï¼Œå•è¯ä¹‹é—´ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼Œä¾‹å¦‚ï¼š`EVENT_GENERATION_PROBABILITY`
6. **ç»„ä»¶å**ï¼šä½¿ç”¨åè¯+Componentåç¼€ï¼Œä¾‹å¦‚ï¼š`BaseAttributesComponent`
7. **ç³»ç»Ÿå**ï¼šä½¿ç”¨åè¯+Systemåç¼€ï¼Œä¾‹å¦‚ï¼š`CultivationSystem`

### 8.2 ä»£ç é£æ ¼

1. **ç¼©è¿›**ï¼šä½¿ç”¨4ä¸ªç©ºæ ¼è¿›è¡Œç¼©è¿›
2. **æ¢è¡Œ**ï¼šæ¯è¡Œä»£ç ä¸è¶…è¿‡120ä¸ªå­—ç¬¦
3. **æ‹¬å·**ï¼šå·¦æ‹¬å·ä¸è¯­å¥åŒè¡Œï¼Œå³æ‹¬å·å•ç‹¬ä¸€è¡Œ
4. **ç©ºæ ¼**ï¼šè¿ç®—ç¬¦å‰åã€é€—å·åã€åˆ†å·ååŠ ç©ºæ ¼
5. **æ³¨é‡Š**ï¼šå…³é”®ä»£ç ã€å¤æ‚ç®—æ³•ã€æ¥å£å®šä¹‰ç­‰éœ€è¦æ·»åŠ æ³¨é‡Š
6. **æ–‡æ¡£**ï¼šå…¬å…±APIéœ€è¦æ·»åŠ KDocæ–‡æ¡£

### 8.3 æ¶æ„åŸåˆ™

1. **å•ä¸€èŒè´£åŸåˆ™**ï¼šæ¯ä¸ªç³»ç»Ÿå’Œç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
2. **ä¾èµ–å€’ç½®åŸåˆ™**ï¼šä¾èµ–æŠ½è±¡ï¼Œä¸ä¾èµ–å…·ä½“å®ç°
3. **æ¥å£éš”ç¦»åŸåˆ™**ï¼šä½¿ç”¨å°è€Œä¸“çš„æ¥å£ï¼Œé¿å…å¤§è€Œå…¨çš„æ¥å£
4. **ç»„åˆä¼˜äºç»§æ‰¿**ï¼šä½¿ç”¨ç»„ä»¶ç»„åˆå®ç°åŠŸèƒ½ï¼Œè€Œä¸æ˜¯ç»§æ‰¿
5. **ä½è€¦åˆé«˜å†…èš**ï¼šç³»ç»Ÿä¹‹é—´è€¦åˆåº¦ä½ï¼Œå†…éƒ¨å†…èšæ€§é«˜

## ä¹ã€ç»“è®º

æœ¬å®ç°è§„èŒƒåŸºäºECSæ¶æ„ï¼Œè¯¦ç»†è®¾è®¡äº†å®—é—¨ä¿®çœŸå½•æ¸¸æˆçš„æ ¸å¿ƒç»„ä»¶ã€ç³»ç»Ÿå’ŒåŠŸèƒ½å®ç°ã€‚é€šè¿‡éµå¾ªæœ¬è§„èŒƒï¼Œå¯ä»¥å¼€å‘å‡ºä¸€ä¸ªæ¶æ„æ¸…æ™°ã€æ€§èƒ½ä¼˜è‰¯ã€åŠŸèƒ½å®Œæ•´çš„æ–‡å­—ä¿®çœŸæ¸¸æˆã€‚

æœ¬è§„èŒƒæ¶µç›–äº†æ¸¸æˆçš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬è§’è‰²ç³»ç»Ÿã€å®—é—¨ç®¡ç†ç³»ç»Ÿã€æˆ˜æ–—ç³»ç»Ÿã€ä»»åŠ¡ä¸äº‹ä»¶ç³»ç»Ÿç­‰ï¼ŒåŒæ—¶ä¹ŸåŒ…æ‹¬äº†ç•Œé¢å®ç°ã€æ¸¸æˆæµç¨‹è®¾è®¡ã€æŠ€æœ¯å®ç°ç»†èŠ‚å’Œå¼€å‘è®¡åˆ’ã€‚

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåº”ä¸¥æ ¼éµå¾ªæœ¬è§„èŒƒï¼Œå¹¶æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œé€‚å½“è°ƒæ•´å’Œä¼˜åŒ–ï¼Œä»¥ç¡®ä¿æ¸¸æˆçš„è´¨é‡å’Œå¯ç©æ€§ã€‚