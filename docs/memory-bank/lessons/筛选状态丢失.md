## 筛选状态丢失

> 创建时间: 2026-02-23
> 分类: lessons
> 状态: active
> 标签: #ui #状态管理 #筛选

**问题/背景**:
弟子界面切换筛选条件时数据丢失，筛选范围越来越小。

**错误做法**:
```kotlin
// ❌ 从已筛选的数据中再次筛选
fun applyFilter(filter: Filter) {
    disciples = disciples.filter { it.matches(filter) }
}
```

**正确做法**:
```kotlin
// ✅ 始终从原始完整数据筛选
private var allDisciples: List<Disciple> = emptyList()

fun applyFilter(filter: Filter) {
    disciples = allDisciples.filter { it.matches(filter) }
}
```

**教训**:
- 筛选操作要保留原始数据源
- 每次筛选从完整数据开始，而非累积筛选
- 状态管理：原始数据 + 当前筛选条件 → 显示数据

**关联记忆**: 无
