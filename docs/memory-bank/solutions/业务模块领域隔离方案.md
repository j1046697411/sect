## 业务模块领域隔离方案

> 创建时间: 2026-02-23
> 分类: solutions
> 状态: active
> 标签: #架构 #重构 #领域隔离 #业务模块

**问题/背景**:
所有业务模块存在依赖混乱问题，表现为：
- 过度依赖，依赖了不需要的东西
- System 访问越界，直接操作其他领域数据
- 导致职责不清、代码重复、难以测试

**解决方案/内容**:
采用领域隔离策略，按业务模块划分边界：

1. **领域划分**：
   - 修炼领域 → business-cultivation
   - 弟子领域 → business-disciples
   - 战斗领域 → business-combat
   - 功法领域 → business-skill

2. **隔离原则**：
   - 每个 System 只操作自己领域的组件
   - 禁止直接访问其他领域的数据

3. **跨模块通信**：
   - 使用 ECS 框架内的观察者服务
   - 发布/订阅模式，解耦发送方和接收方

4. **实施步骤**：
   - Phase 1: 调研 ECS 框架观察者服务能力
   - Phase 2: 试点重构一个模块
   - Phase 3: 全面重构
   - Phase 4: 验证与优化

**关联记忆**: #conventions:ECS架构
