================================================================================
                    代码地图差异报告 - 2026-02-14
================================================================================

项目: 宗门修真录 (sect)
类型: Kotlin Multiplatform ECS 游戏框架

================================================================================
                              生成概览
================================================================================

代码地图版本: 首次生成
生成时间: 2026-02-14
分析范围: libs/, composeApp/, androidApp/, benchmarks/

================================================================================
                              统计信息
================================================================================

【代码地图文件】
  - INDEX.md:          56 行
  - architecture.md:  108 行
  - backend.md:       162 行
  - frontend.md:      134 行
  - data.md:          144 行
  --------------------------------
  总计:               604 行

【源代码统计】
  - Kotlin 文件总数:  201 个
  - 核心模块数:         4 个 (lko-core, lko-di, lko-ecs, lko-ecs-serialization)
  - 业务模块数:         5 个 (框架阶段)
  - 应用模块数:         2 个 (composeApp, androidApp)

【模块结构】
  libs/
  ├── lko-core/          核心工具库 (集合/位运算)
  ├── lko-di/            依赖注入框架
  ├── lko-ecs/           ECS 框架核心
  └── lko-ecs-serialization/  序列化支持

  business-modules/
  ├── business-core/            核心业务
  ├── business-disciples/        弟子系统
  ├── business-cultivation/      修炼系统
  ├── business-quest/            任务系统
  └── business-engine/           游戏引擎

================================================================================
                              差异分析
================================================================================

【与前版本对比】
  状态: 首次生成 (无前版本)
  变更: 100% (新增)
  
  说明: 这是代码地图的首次创建，之前不存在架构文档。
        所有文档均为新生成。

================================================================================
                              文档清单
================================================================================

已生成的文件:
  [✓] codemaps/INDEX.md          - 代码地图索引
  [✓] codemaps/architecture.md   - 整体架构
  [✓] codemaps/backend.md        - 后端结构 (ECS 核心)
  [✓] codemaps/frontend.md       - 前端结构 (应用层)
  [✓] codemaps/data.md           - 数据模型 (序列化)

================================================================================
                              ECS 框架分析
================================================================================

【核心子系统】
  1. Entity (实体管理)
     - EntityService: 实体创建/销毁
     - EntityStore: 实体数据存储
     - EntityEditor: 实体编辑器

  2. Component (组件系统)
     - ComponentService: 组件管理
     - ComponentStore: 组件存储
     - ComponentProvider: 组件供应

  3. Archetype (原型系统)
     - Archetype: 组件组合标识
     - ArchetypeService: 原型管理
     - Table: 连续内存存储

  4. Query (查询系统)
     - Query: 查询定义
     - QueryService: 查询服务
     - EntityQueryContext: 查询上下文

  5. Family (家族匹配)
     - Family: 组件集合匹配
     - FamilyService: 家族管理

  6. Relation (关系系统)
     - Relation: 父子/实例关系
     - RelationService: 关系管理

  7. Observer (观察系统)
     - Observer: 事件观察器
     - ObserveService: 事件分发

  8. Addon (扩展系统)
     - Addon: 扩展定义
     - WorldSetup: DSL 配置

================================================================================
                              依赖关系
================================================================================

【模块依赖】
  lko-ecs        → lko-di, lko-core
  lko-ecs-serialization → lko-ecs, lko-di
  composeApp     → lko-ecs, lko-ecs-serialization

【外部依赖】
  - kodein: 类型标记
  - androidx.collection: 整型列表
  - kotlinx.atomic: 原子操作
  - kotlinx.serialization: 序列化

================================================================================
                              状态
================================================================================

需要用户批准: 否
说明: 首次生成，无前版本对比

================================================================================
                              建议
================================================================================

1. 业务模块开发完成后，需要更新代码地图以反映新增的业务逻辑
2. 添加新功能时，同步更新相关的代码地图文档
3. 定期审查代码地图与实际代码的一致性

================================================================================
                              完成
================================================================================
